{
  "meta": {
    "project": "basilisk-av",
    "currentPhase": 6,
    "lastUpdated": "2025-12-12",
    "notes": "Only modify 'passes' field during development. Never remove verification steps."
  },
  "features": [
    {
      "id": "p6-sound-list",
      "phase": 6,
      "category": "sound-browser",
      "description": "Sound menu displaying all loaded Strudel samples",
      "priority": "high",
      "dependencies": [],
      "verification": [
        "Click Sound Browser toggle button",
        "Panel opens showing sample categories",
        "Each category expands to show sample names",
        "Sample count displayed per category",
        "Panel closes on toggle or click-away"
      ],
      "passes": false
    },
    {
      "id": "p6-sound-search",
      "phase": 6,
      "category": "sound-browser",
      "description": "Searchable/filterable sound list",
      "priority": "high",
      "dependencies": ["p6-sound-list"],
      "verification": [
        "Search input visible at top of Sound Browser",
        "Typing filters samples in real-time",
        "Matches highlight in results",
        "Empty state shown when no matches",
        "Clear button resets search"
      ],
      "passes": false
    },
    {
      "id": "p6-sound-preview",
      "phase": 6,
      "category": "sound-browser",
      "description": "Preview sounds on click",
      "priority": "high",
      "dependencies": ["p6-sound-list"],
      "verification": [
        "Single-click on sample name plays preview",
        "Preview plays without interrupting current pattern",
        "Visual indicator shows which sample is playing",
        "Preview stops when another sample clicked",
        "Preview works even when engine not started"
      ],
      "passes": false
    },
    {
      "id": "p6-sound-toggle-button",
      "phase": 6,
      "category": "sound-browser",
      "description": "Replace Test button with Sound Browser toggle",
      "priority": "medium",
      "dependencies": ["p6-sound-list"],
      "verification": [
        "Test button removed from header",
        "Sound Browser button in its place",
        "Icon clearly indicates sound/sample function",
        "Tooltip explains button purpose",
        "Button state reflects panel open/closed"
      ],
      "passes": false
    },
    {
      "id": "p6-sound-insert",
      "phase": 6,
      "category": "sound-browser",
      "description": "Insert sample name into editor on double-click",
      "priority": "low",
      "dependencies": ["p6-sound-list"],
      "verification": [
        "Double-click sample inserts name at cursor",
        "Inserted text formatted correctly for Strudel",
        "Editor receives focus after insert",
        "Works with category:sample format (e.g., bd:0)"
      ],
      "passes": false
    },
    {
      "id": "p6-repl-dark-toggle",
      "phase": 6,
      "category": "repl-theming",
      "description": "Dark mode toggle for REPL editor",
      "priority": "medium",
      "dependencies": [],
      "verification": [
        "Toggle button visible in REPL header",
        "Click switches between light/dark themes",
        "Theme preference persists via localStorage",
        "Theme applies immediately without flicker",
        "Default matches system preference or dark"
      ],
      "passes": false
    },
    {
      "id": "p6-repl-syntax-theme",
      "phase": 6,
      "category": "repl-theming",
      "description": "Syntax highlighting color scheme",
      "priority": "low",
      "dependencies": ["p6-repl-dark-toggle"],
      "verification": [
        "Syntax colors readable in dark mode",
        "Syntax colors readable in light mode",
        "Keywords, strings, numbers visually distinct",
        "Colors don't clash with Hydra visuals behind"
      ],
      "passes": false
    },
    {
      "id": "p6-shortcut-engine-start",
      "phase": 6,
      "category": "keyboard",
      "description": "Keyboard shortcut to start engine",
      "priority": "medium",
      "dependencies": [],
      "verification": [
        "Designated shortcut starts Strudel engine",
        "Works when REPL not focused",
        "No-op if engine already running",
        "Visual feedback confirms engine started"
      ],
      "passes": false
    },
    {
      "id": "p6-shortcut-halt",
      "phase": 6,
      "category": "keyboard",
      "description": "Emergency halt/stop audio shortcut",
      "priority": "high",
      "dependencies": [],
      "verification": [
        "Shortcut immediately stops all audio",
        "Works regardless of focus state",
        "Hydra visuals continue (audio only halt)",
        "Can restart pattern after halt",
        "Shortcut is memorable (e.g., Escape or Ctrl+.)"
      ],
      "passes": false
    },
    {
      "id": "p6-shortcut-hide-repl",
      "phase": 6,
      "category": "keyboard",
      "description": "Hide/show REPL toggle shortcut",
      "priority": "medium",
      "dependencies": [],
      "verification": [
        "Shortcut hides REPL panel completely",
        "Same shortcut shows REPL again",
        "REPL position preserved on restore",
        "Works when REPL is/isn't focused",
        "Hydra canvas fills viewport when hidden"
      ],
      "passes": false
    },
    {
      "id": "p6-shortcut-help",
      "phase": 6,
      "category": "keyboard",
      "description": "Keyboard shortcut help overlay",
      "priority": "low",
      "dependencies": ["p6-shortcut-engine-start", "p6-shortcut-halt", "p6-shortcut-hide-repl"],
      "verification": [
        "Shortcut (e.g., ?) opens help overlay",
        "Overlay lists all available shortcuts",
        "Overlay dismisses on Escape or click-away",
        "Overlay styled consistently with glassmorphism",
        "Shortcuts grouped by category"
      ],
      "passes": false
    },
    {
      "id": "p6-hud-fft-bands",
      "phase": 6,
      "category": "production-hud",
      "description": "Compact FFT analyzer per a.fft band",
      "priority": "medium",
      "dependencies": [],
      "verification": [
        "4 mini visualizers shown (a.fft[0-3])",
        "Each bar responds to its frequency band",
        "Visualizers update in real-time",
        "Positioned non-intrusively (corner)",
        "Labels identify each band"
      ],
      "passes": false
    },
    {
      "id": "p6-hud-cpu",
      "phase": 6,
      "category": "production-hud",
      "description": "CPU/processing power percentage display",
      "priority": "low",
      "dependencies": [],
      "verification": [
        "CPU percentage displayed in HUD",
        "Updates at reasonable interval (1-2s)",
        "Warns visually if CPU high (>80%)",
        "Uses Performance API accurately"
      ],
      "passes": false
    },
    {
      "id": "p6-hud-fps",
      "phase": 6,
      "category": "production-hud",
      "description": "FPS counter display",
      "priority": "medium",
      "dependencies": [],
      "verification": [
        "FPS counter visible in HUD",
        "Shows current frame rate",
        "Updates smoothly (rolling average)",
        "Warns if FPS drops below 30"
      ],
      "passes": false
    },
    {
      "id": "p6-hud-toggle",
      "phase": 6,
      "category": "production-hud",
      "description": "Toggle HUD visibility",
      "priority": "medium",
      "dependencies": ["p6-hud-fft-bands"],
      "verification": [
        "Button or shortcut toggles HUD",
        "HUD completely hidden when off",
        "Preference persists via localStorage",
        "Default state is hidden (production mode)"
      ],
      "passes": false
    },
    {
      "id": "p6-hud-styling",
      "phase": 6,
      "category": "production-hud",
      "description": "Minimal non-intrusive HUD design",
      "priority": "low",
      "dependencies": ["p6-hud-fft-bands", "p6-hud-fps"],
      "verification": [
        "HUD uses glassmorphism consistent with REPL",
        "Semi-transparent, doesn't block visuals",
        "Monochrome palette per basilisk-style",
        "Compact layout, minimal footprint"
      ],
      "passes": false
    },
    {
      "id": "p6-sample-panel-base",
      "phase": 6,
      "category": "shared-components",
      "description": "Shared base component for Sound Browser and User Library panels",
      "priority": "high",
      "dependencies": [],
      "verification": [
        "SamplePanel component accepts title prop",
        "SamplePanel accepts items array with nested structure",
        "SamplePanel renders collapsible directory tree",
        "SamplePanel accepts onItemClick callback",
        "SamplePanel accepts onItemDoubleClick callback",
        "SamplePanel accepts searchable boolean prop",
        "Component exports from shared location"
      ],
      "passes": false
    },
    {
      "id": "p6-user-library-button",
      "phase": 6,
      "category": "user-library",
      "description": "User Library toggle button in header with waveform icon",
      "priority": "high",
      "dependencies": ["p6-sample-panel-base"],
      "verification": [
        "User Library button visible in header",
        "Button uses waveform icon (distinct from Sound Browser)",
        "Tooltip shows 'User Library'",
        "Button state reflects panel open/closed",
        "Button positioned near Sound Browser button"
      ],
      "passes": false
    },
    {
      "id": "p6-user-library-panel",
      "phase": 6,
      "category": "user-library",
      "description": "User Library panel displaying user's linked sample directories",
      "priority": "high",
      "dependencies": ["p6-user-library-button", "p6-sample-panel-base"],
      "verification": [
        "Click User Library button opens panel",
        "Panel shows directory tree from linked source",
        "Subdirectories are collapsible",
        "Sample files listed under their directories",
        "Panel styled consistently with Sound Browser"
      ],
      "passes": false
    },
    {
      "id": "p6-panel-exclusivity",
      "phase": 6,
      "category": "user-library",
      "description": "Only one panel (Sound Browser or User Library) open at a time",
      "priority": "high",
      "dependencies": ["p6-sound-list", "p6-user-library-panel"],
      "verification": [
        "Opening Sound Browser closes User Library",
        "Opening User Library closes Sound Browser",
        "Panel state managed by single source of truth",
        "No visual glitch during panel switch",
        "Both panels closed is valid state"
      ],
      "passes": false
    },
    {
      "id": "p6-user-library-link",
      "phase": 6,
      "category": "user-library",
      "description": "Link master user directory of sounds",
      "priority": "high",
      "dependencies": ["p6-user-library-panel"],
      "verification": [
        "Settings or prompt to link directory on first open",
        "Directory picker allows selecting folder",
        "Linked path persists via localStorage",
        "Change directory option available",
        "Error state shown if directory inaccessible"
      ],
      "passes": false
    },
    {
      "id": "p6-user-library-preview",
      "phase": 6,
      "category": "user-library",
      "description": "Preview user samples on click",
      "priority": "medium",
      "dependencies": ["p6-user-library-panel", "p6-sound-preview"],
      "verification": [
        "Single-click on sample plays preview",
        "Preview uses Web Audio API directly",
        "Visual indicator shows playing sample",
        "Preview stops when another clicked",
        "Supports common audio formats (wav, mp3, ogg)"
      ],
      "passes": false
    },
    {
      "id": "p6-user-library-insert",
      "phase": 6,
      "category": "user-library",
      "description": "Insert user sample path into editor on double-click",
      "priority": "medium",
      "dependencies": ["p6-user-library-panel", "p6-sound-insert"],
      "verification": [
        "Double-click sample inserts path at cursor",
        "Path formatted for Strudel samples() function",
        "Editor receives focus after insert",
        "Relative path used if within project"
      ],
      "passes": false
    },
    {
      "id": "p6-user-library-search",
      "phase": 6,
      "category": "user-library",
      "description": "Search user samples",
      "priority": "low",
      "dependencies": ["p6-user-library-panel", "p6-sound-search"],
      "verification": [
        "Search input at top of User Library",
        "Typing filters samples across all directories",
        "Matches shown with directory context",
        "Empty state when no matches",
        "Clear button resets search"
      ],
      "passes": false
    }
  ]
}
